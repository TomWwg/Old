package com.sws.action;import java.util.ArrayList;import java.util.List;import com.gk.essh.util.tree.TreeNode;import com.sws.common.AjaxUtil;import com.sws.common.baseAction.BaseAction;import com.sws.common.until.StringUtil;import com.sws.model.StaffInfo;public class AjaxAction extends BaseAction<AjaxAction>{	private static final long serialVersionUID = 1L;	/**是否需要隐藏感控科*/	protected Boolean hideControlDepart ;	/**	 * 部门树	 * @return	 */	public String getDepartmentTree() {		TreeNode temp = groupTreeService.getTree(getManageDepart(),getCommSession().getOrg(), true,isTreeOpen);		if(hideControlDepart != null && hideControlDepart.booleanValue() == true){			List<TreeNode> newChildren = new ArrayList<TreeNode>();			for(TreeNode child:temp.getChildren()){				if(!child.getId().equals("132") &&						!(child.getId().equals("感控科") ||child.getId().equals("感染控制科"))){					newChildren.add(child);				}			}						temp.setChildren(newChildren);					}				treeNode = temp;		//treeNode.		return TREE;	}	/**	 * 整个树	 * @return	 */	public String getAllTree() {		treeNode = groupTreeService.getTree(getManageDepart(),getCommSession().getOrg(),false,isTreeOpen);		return TREE;	}	/**	 * 根据科室选择医生	 * @return	 */	public String getStaff(){		List<StaffInfo> staffList = new ArrayList<StaffInfo>();		staffList = staffInfoDao.findByDepartAndType(getCommSession().getOrg(),Long.valueOf(groupTreeId),null);		String options = "<option value='-1'>---全部---</option>";		for(StaffInfo info:staffList){			options+="<option value='"+info.getId().toString()+"'>"+info.getName()+"</option>";		}		AjaxUtil.ajaxWrite(true,options);		return SUCCESS;	}	/**	 * 根据科室+人员类别得到人员	 * @return	 */	public String getStaffByType(){		List<StaffInfo> staffList = new ArrayList<StaffInfo>();		if(staffType!=null){			List<String> typeList = new ArrayList<String>();			String[] staffTypeArray = staffType.split(",");//人员类别名称			for(String type:staffTypeArray){				typeList.add(type);			}			if(StringUtil.isNotBlank(groupTreeId)){				staffList = staffInfoDao.findByDepartAndType(getCommSession().getOrg(),Long.valueOf(groupTreeId),typeList);			}			String options = "<option value='-1'>---全部---</option>";			for(StaffInfo info:staffList){				options+="<option value='"+info.getId().toString()+"'>"+info.getName()+"</option>";			}			AjaxUtil.ajaxWrite(true,options);		}		return SUCCESS;	}	public Boolean getHideControlDepart() {		return hideControlDepart;	}	public void setHideControlDepart(Boolean hideControlDepart) {		this.hideControlDepart = hideControlDepart;	}}