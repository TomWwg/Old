package com.sws.service.imp;import java.util.ArrayList;import java.util.List;import org.springframework.beans.factory.annotation.Autowired;import com.gk.extend.hibernate.entity.QueryEntity;import com.sws.dao.LogInfoDao;import com.sws.dao.UserInfoDao;import com.sws.model.LogInfo;import com.sws.model.UserInfo;import com.sws.service.LogInfoService;import com.sys.core.util.StringUtils;import com.sys.core.util.bean.Page;//@Service("staffInfoService")public class LogInfoServiceImpl implements LogInfoService {    	@Autowired    private LogInfoDao logInfoDao;	@Autowired    private UserInfoDao userInfoDao;	@Override	public Page page(QueryEntity queryEntity,int start, int limit,String sortname,String sortorder){		Page page=null;		List<String> paramList = new ArrayList<String>();		List<Object> valueList = new ArrayList<Object>();		if(queryEntity.getInt1()!=null){			paramList.add("type");			valueList.add(queryEntity.getInt1());		}		if(StringUtils.isNotBlank(queryEntity.getStr1())){//操作用户			UserInfo user = userInfoDao.findUniqueBy("name", queryEntity.getStr1());			paramList.add("userInfo.id");			if(user!=null){				valueList.add(user.getId());			}else{				valueList.add(0L);			}		}		if(queryEntity.getStartTime()!=null&&queryEntity.getEndTime()!=null){			 page = logInfoDao.page(paramList.toArray(new String[paramList.size()]), valueList.toArray(),start, limit, sortname,					 sortorder.toLowerCase().equals("asc")?true:false, queryEntity.getStartTime(), queryEntity.getEndTime());		}		return page;	}	@Override	public void addLog(Integer type, String remark, UserInfo userInfo) {		LogInfo logInfo = new LogInfo();		logInfo.setType(type);		logInfo.setRemark(remark);		logInfo.setUserInfo(userInfo);		logInfoDao.save(logInfo);	}	@Override	public List<LogInfo> findLogsWhileUserNotAdmin(QueryEntity queryEntity, int start,			int limit, String sortname, String sortorder) {		List<LogInfo> logInfos = logInfoDao.findLogsNotAdmin(queryEntity, start, limit, sortname, sortorder);		return logInfos;	}}